<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Selector</title>
	<meta name="generator" content="TextMate http://macromates.com/">
	<meta name="author" content="Jack">
	<script src="knockout.js"></script>
	<script src="jquery.min.js"></script>
  <script src="jquery.zclip.min.js"></script>
<style>
.group:before, .group:after {content:""; display:table;}
.group:after {clear:both;}
section {float: left;}
ul {margin: 3px; padding: 3px;}
h4 {margin: 3px; padding: 3px;}
.type {margin: 20px 0 0;}
.sub {width: 200px;}
.color, .shadow_color, .border_color {width: 100px;}
input[type=radio] {height: 50px; width: 50px; opacity: 0; display: 
  inline-block; position: absolute; top: -5px; left: -5px; z-index: 100;}
input {width: 42px; margin-right: 10px;}
input[type=text] {width: 80px;}
input[type=checkbox] {}
li.box {display: inline-block; border: 1px dashed gray; padding: 5px; position: relative;}
ul li.box.active, ul li.box:hover {border: 1px solid black; background: #EEE;}
ul li.box {opacity: .5;}
ul li.box:hover, ul li.box.active {opacity: 1;}


#code .triangle .shadow {display: none;}
#code { background: #EEE; width: 500px; padding: 30px 60px; border-radius: 20px; border: 1px solid black; margin: 30px 0 0 0;}
#copy {background: #DDD; border: 1px solid gray; display: block; float: right; border-radius: 3px; padding: 3px 20px;}
#copy:hover {background: #999; cursor: pointer;} 

#code ol {list-style-type:decimal-leading-zero;}
#code .triangle, #code .border {border-left: 1px solid black;}
#code li {padding-left: 30px;}
#code li.outdent {padding-left: 10px;}


#visual {position: absolute; top: 100px; left: 550px;}
#visual .triangle, #visual .border {height:0; width:0; border-style: solid; position: relative;}
#visual .border {position: absolute; top: 0; left: 0;}

.___c, ._c__, .c___, .__c_, .cc__, ._cc_, .__cc, .c__c {
  position: relative;
  border-style: solid;
  border-width: 20px;
  border-color: transparent;
  height:0; width:0;
  line-height: 0;
  font-size: 0;
}
.___c {border-color: transparent transparent transparent black; margin: 0 -10px 0 10px;}
._c__ {border-color: transparent black transparent transparent; margin: 0 10px 0 -10px;}
.c___ {border-color: black transparent transparent transparent; margin: 10px 0 -10px 0;}
.__c_ {border-color: transparent transparent black transparent; margin: -10px 0 10px 0;}
.cc__, ._cc_, .__cc, .c__c {border-width: 15px; margin: 5px;}
.cc__ {border-color: black black transparent transparent;}
._cc_ {border-color: transparent black black transparent;}
.__cc {border-color: transparent transparent black black;}
.c__c {border-color: black transparent transparent black;}
</style>
</head>
<body>

  <ul data-bind="foreach: optionValues">
    <li class="box">
      <input type="radio" name="triTypes" data-bind="attr: {value: $data}, checked: $root.radioOption" />
      <div class="triangle" data-bind="attr: {class: $data}"></div>
    </li>
  </ul>
<div>
<h4>Triangle</h4>  
Height: <input type="number" data-bind='value: triHeight, valueUpdate: "afterkeydown"' />
Width:  <input type="number" data-bind='value: triWidth, valueUpdate: "afterkeydown"' />
Color:  <input type="text" data-bind='value: triColor, valueUpdate: "afterkeydown"' />
</div>
<div>
<h4>Shadow<input type="checkbox" class="shadow" data-bind='checked: shadowBoole'></h4>
Y Offset:  <input type="number" data-bind='value: shadowY, valueUpdate: "afterkeydown"' />
X Offset: <input type="number" data-bind='value: shadowX, valueUpdate: "afterkeydown"' />
Blur:  <input type="number" data-bind='value: shadowB, valueUpdate: "afterkeydown"' />
Color:  <input type="text" data-bind='value: shadowC, valueUpdate: "afterkeydown"' />
</div>

<div> 
<h4>Border<input type="checkbox" class="border" data-bind='checked: borderBoole'></h4>
Y Offset: <input type="number" data-bind='value: borderY, valueUpdate: "afterkeydown"' />
X Offset: <input type="number" data-bind='value: borderX, valueUpdate: "afterkeydown"' />
Width: <input type="number" data-bind='value: borderW, valueUpdate: "afterkeydown"' />
Color: <input type="text" data-bind='value: borderC, valueUpdate: "afterkeydown"' />
</div> 

<div id="visual">
  <div class="border" data-bind="style: {borderColor: colorOfBorder, borderWidth: widthOfBorder, webkitFilter: borderShadowCode, margin: marginOfBorder}"></div>
  <div class="triangle" data-bind="style:        {borderColor: triangleColor, borderWidth: triangleWidth, webkitFilter: triangleShadowCode}"></div>
</div>

<div id="code">
  <!-- &lt;div class="border" &gt;&lt;/div&gt;
  &lt;div class="triangle" &gt;&lt;/div&gt; -->
  <a id="copy">Copy</a>
  <ol>
  <div class="triangle">
    <li class="outdent">.triangle {</li>
    <li><label>height: </label><span>0</span>;</li>
    <li><label>width: </label><span>0</span>;</li>
    <li><label>border-style: </label><span>solid</span>;</li>
    <li><label>border-width: </label><span data-bind='text: triangleWidth'></span>;</li>
    <li><label>border-color: </label><span data-bind='text: triangleColor'></span>;</li>
    <div class="shadow">
      <li><label>-webkit-filter: drop-shadow(</label>
        <span data-bind='text: shadowX'></span>px&nbsp;
        <span data-bind='text: shadowY'></span>px&nbsp;
        <span data-bind='text: shadowB'></span>px&nbsp;
        <span data-bind='text: shadowC'></span>);</li>
      <li><label>-moz-filter: drop-shadow(</label>
        <span data-bind='text: shadowX'></span>px&nbsp;
        <span data-bind='text: shadowY'></span>px&nbsp;
        <span data-bind='text: shadowB'></span>px&nbsp;
        <span data-bind='text: shadowC'></span>);</li>
      <li><label>-o-filter: drop-shadow(</label>
        <span data-bind='text: shadowX'></span>px&nbsp;
        <span data-bind='text: shadowY'></span>px&nbsp;
        <span data-bind='text: shadowB'></span>px&nbsp;
        <span data-bind='text: shadowC'></span>);</li>
      <li><label>-filter: drop-shadow(</label>
        <span data-bind='text: shadowX'></span>px&nbsp;
        <span data-bind='text: shadowY'></span>px&nbsp;
        <span data-bind='text: shadowB'></span>px&nbsp;
        <span data-bind='text: shadowC'></span>);</li>
    </div>  <!-- end div.shadow -->
    <li class="outdent">}</li>
    <li></li>
  </div>

  <div class="border">
    <li class="outdent">.border {</li>
        <li><label>position: </label><span>absolute</span>;</li>
        <li><label>top: </label><span>0</span>;</li>
        <li><label>left: </label><span>0</span>;</li>
        <li><label>height: </label><span>0</span>;</li>
        <li><label>width: </label><span>0</span>;</li>
        <li><label>border-style: </label><span>solid</span>;</li>
        <li><label>border-width: </label><span data-bind='text: widthOfBorder'></span>;</li>
        <li><label>border-color: </label><span data-bind='text: colorOfBorder'></span>;</li>
        <li><label>margin: </label><span data-bind='text: marginOfBorder'></span>;</li>

        <div class="shadow">
          <li><label>-webkit-filter: drop-shadow(</label>
            <span data-bind='text: shadowX'></span>px &nbsp;
            <span data-bind='text: shadowY'></span>px &nbsp;
            <span data-bind='text: shadowB'></span>px &nbsp;
            <span data-bind='text: shadowC'></span>);</li>
          <li><label>-moz-filter: drop-shadow(</label>
            <span data-bind='text: shadowX'></span>px &nbsp;
            <span data-bind='text: shadowY'></span>px &nbsp;
            <span data-bind='text: shadowB'></span>px &nbsp;
            <span data-bind='text: shadowC'></span>);</li>
          <li><label>-o-filter: drop-shadow(</label>
            <span data-bind='text: shadowX'></span>px &nbsp;
            <span data-bind='text: shadowY'></span>px &nbsp;
            <span data-bind='text: shadowB'></span>px &nbsp;
            <span data-bind='text: shadowC'></span>);</li>
          <li><label>-filter: drop-shadow(</label>
            <span data-bind='text: shadowX'></span>px &nbsp;
            <span data-bind='text: shadowY'></span>px &nbsp;
            <span data-bind='text: shadowB'></span>px &nbsp;
            <span data-bind='text: shadowC'></span>);</li>
          </div> <!-- end div.shadow -->
    <li class="outdent">}</li>
    <li></li>
  </ol>
</div>  <!-- end div#code -->




</body>
<script type="text/javascript">
$(function(){
  $('li.box:first-child').addClass('active');
  $('li').click(function(){
    $('li').removeClass('active');
    $(this).addClass('active');
  });
  
  $('input[type=checkbox]').click(function(){
    if( $('input.shadow').attr('checked') && $('input.border').attr('checked') ) {
      // border with shadow
      $('#code .triangle .shadow').hide();
      $('#code .border, #code .border .shadow, #visual .border').show();
    } else if( $('input.border').attr('checked') ) {
      // just border
      $('#code .border .shadow').hide()
      $('#code .border, #visual .border').show();
    } else if( $('input.shadow').attr('checked') ) {
      // triangle with shadow
      $('#code .triangle .shadow').show();
      $('#code .border, #code .border .shadow, #visual .border').hide();  
    } else {
      // just triangle
      $('#code .triangle .shadow').hide();
      $('#code .border, #code .border .shadow, #visual .border').hide();
    }
  });
  
  $('a#copy').zclip('show');
  $('a#copy').hover(function(){
    console.log('click');
  });
  $('a#copy').zclip({
    path:'ZeroClipboard.swf',
    copy:$('#code ol').text()
  });
  
});


var viewModel = function() {
    
    this.optionValues = ["c___","_c__","__c_","___c","cc__","_cc_","__cc","c__c"];
    this.triColor = ko.observable("yellow");
    this.radioOption = ko.observable("c___");
    this.triangleColor = ko.computed(function() {
      return this.radioOption().replace(/c/gi, ' ' + this.triColor()).replace(/_/g, ' transparent' )
    }, this);

    this.triHeight = ko.observable(100);
    this.triWidth = ko.observable(100);
    this.triangleWidth = ko.computed(function() {
      if(this.radioOption() == "___c" || this.radioOption() == "_c__") {
        return  this.triHeight() / 2  + "px "   +   this.triWidth() + "px";
      } else if(this.radioOption() == "c___" || this.radioOption() == "__c_") {
        return  this.triHeight()     + "px "    +   this.triWidth() / 2 + "px";
      } else {
        return  this.triHeight() / 2  + "px "   +   this.triWidth() / 2 + "px";
      }
    }, this);  
    
    this.shadowBoole = ko.observable(true);
    this.borderBoole = ko.observable(true);
    

    this.shadowX = ko.observable(4);
    this.shadowY = ko.observable(4);
    this.shadowB = ko.observable(4);
    this.shadowC = ko.observable("#AAAAAA");
    this.triangleShadowCode = ko.computed(function() {
      if (this.shadowBoole() == true  && this.borderBoole() == false) {
        return 'drop-shadow(' + this.shadowX() + 'px ' + this.shadowY() + 'px ' + this.shadowB() + 'px ' + this.shadowC() + ')'
      } 
    }, this);
    

    this.borderShadowCode = ko.computed(function() {
      if (this.shadowBoole() == true && this.borderBoole() == true) {
        return 'drop-shadow(' + this.shadowX() + 'px ' + this.shadowY() + 'px ' + this.shadowB() + 'px ' + this.shadowC() + ')'
      } 
    }, this);
    
    this.borderY = ko.observable(-2);
    this.borderX = ko.observable(-4);
    this.marginOfBorder = ko.computed(function() {
      return this.borderY() + 'px 0 0 ' + this.borderX() + 'px'
    }, this);
    
    this.borderC = ko.observable("green");
    this.colorOfBorder = ko.computed(function() {
      if (this.borderBoole() == true) {
        return this.radioOption().replace(/c/gi, " " + this.borderC() ).replace(/_/g, ' transparent' )
      }
    }, this);
    
    this.borderW = ko.observable(8);    
    this.widthOfBorder = ko.computed(function() {
      if        (this.radioOption() == "___c"   ||  this.radioOption() == "_c__") {
        return  (this.triHeight() / 2 +   this.borderW() / 2 )  + "px " +   (+this.triWidth()     +  +this.borderW() ) + "px";
      } else if (this.radioOption() == "c___"   ||  this.radioOption() == "__c_") {
        return  (+this.triHeight()    +  +this.borderW() )      + "px " +   (this.triWidth() / 2  +   this.borderW() / 2 ) + "px";
      } else {
        return  (this.triHeight() / 2 +   this.borderW() / 2 )  + "px " +   (this.triWidth() / 2  +   this.borderW() / 2 ) + "px";
      }
    }, this);
    
    
    
};
ko.applyBindings(new viewModel());

</script>
</html>
