<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Selector</title>
	<meta name="generator" content="TextMate http://macromates.com/">
	<meta name="author" content="Jack">
	<script src="knockout.js"></script>
	<script src="jquery.min.js"></script>
<style>
.group:before, .group:after {content:""; display:table;}
.group:after {clear:both;}
section {float: left;}
ul {margin: 3px; padding: 3px;}
h3 {margin: 3px; padding: 3px;}
h4 {margin: 3px; padding: 3px;}

.color, .shadow_color, .border_color {width: 100px;}
input[type=radio] {height: 50px; width: 50px; opacity: 0; display: 
  inline-block; position: absolute; top: -5px; left: -5px; z-index: 100;}
input {width: 42px; margin-right: 10px;}
input[type=text] {width: 100px;}
li.box {display: inline-block; border: 1px dashed gray; padding: 5px; position: relative;}
li.active, li:hover {border: 1px solid black;}


.declarations, .shadow_code {margin-left: 20px;}
section {position: relative; float: left; margin: 25px;}


.___c, ._c__, .c___, .__c_, .cc__, ._cc_, .__cc, .c__c, .visual, .border_visual {
  position: relative;
  border-style: solid;
  border-width: 20px;
  border-color: transparent;
  height:0; width:0;
  line-height: 0;
  font-size: 0;
}

.display_box .visual {float: left; z-index: 1;}
.display_box .border_visual {z-index: 0;}

.___c {border-color: transparent transparent transparent gray; margin: 0 -10px 0 10px;}
._c__ {border-color: transparent gray transparent transparent; margin: 0 10px 0 -10px;}
.c___ {border-color: gray transparent transparent transparent; margin: 10px 0 -10px 0;}
.__c_ {border-color: transparent transparent gray transparent; margin: -10px 0 10px 0;}
.cc__, ._cc_, .__cc, .c__c {border-width: 15px; margin: 5px;}
.cc__ {border-color: gray gray transparent transparent;}
._cc_ {border-color: transparent gray gray transparent;}
.__cc {border-color: transparent transparent gray gray;}
.c__c {border-color: gray transparent transparent gray;}

</style>
</head>
<body>
  <section class="inputs">
    <ul data-bind="foreach: optionValues">
      <li class="box">
        <input type="radio" name="triTypes" data-bind="attr: {value: $data}, checked: $root.radioOption" />
        <div class="triangle" data-bind="attr: {class: $data}"></div>
      </li>
    </ul>

    <h4>Triangle</h4>  
    Height: <input type="number" data-bind='value: triHeight, valueUpdate: "afterkeydown"' />
    Width:  <input type="number" data-bind='value: triWidth, valueUpdate: "afterkeydown"' />
    Color:  <input type="text" data-bind='value: triColor, valueUpdate: "afterkeydown"' />
    <h4>Shadow</h4>
    X Offset: <input type="number" data-bind='value: shadowX, valueUpdate: "afterkeydown"' />
    Y Offset:  <input type="number" data-bind='value: shadowY, valueUpdate: "afterkeydown"' />
    Blur:  <input type="number" data-bind='value: shadowB, valueUpdate: "afterkeydown"' />
    Color:  <input type="text" data-bind='value: shadowC, valueUpdate: "afterkeydown"' />
    <h4>Border</h4>
    X Offset: <input type="number" data-bind='value: borderX, valueUpdate: "afterkeydown"' />
    Y Offset:  <input type="number" data-bind='value: borderY, valueUpdate: "afterkeydown"' />
    Width:  <input type="number" data-bind='value: borderS, valueUpdate: "afterkeydown"' />
    Color:  <input type="text" data-bind='value: borderC, valueUpdate: "afterkeydown"' />
  </section> 

  <section class="display_box">
    <div class="visual" data-bind="style: { borderColor: triangleColor, borderWidth: triangleWidth}"></div>
    <div class="border_visual" data-bind="style: {margin: bordOffSet, borderColor: bordColor, borderWidth: bordWidth, webkitFilter: shadowCode}"></div>
  </section>

  <section class="code">
    <h3>.triangle {</h3>
      <div class="declarations">
        <label>border-width: </label><span data-bind='text: triangleWidth'></span>;<br/>
        <label>boder-color: </label><span data-bind='text: triangleColor'></span>;<br/>
        <br/>
        <label>-webkit-filter: drop-shadow(</label>
          <span data-bind='text: shadowX'></span>px&nbsp;
          <span data-bind='text: shadowY'></span>px&nbsp;
          <span data-bind='text: shadowB'></span>px&nbsp;
          <span data-bind='text: shadowC'></span>);<br/>
        <label>-moz-filter: drop-shadow(</label>
          <span data-bind='text: shadowX'></span>px&nbsp;
          <span data-bind='text: shadowY'></span>px&nbsp;
          <span data-bind='text: shadowB'></span>px&nbsp;
          <span data-bind='text: shadowC'></span>);<br/>
        <label>-o-filter: drop-shadow(</label>
          <span data-bind='text: shadowX'></span>px&nbsp;
          <span data-bind='text: shadowY'></span>px&nbsp;
          <span data-bind='text: shadowB'></span>px&nbsp;
          <span data-bind='text: shadowC'></span>);<br/>
        <label>-filter: drop-shadow(</label>
          <span data-bind='text: shadowX'></span>px&nbsp;
          <span data-bind='text: shadowY'></span>px&nbsp;
          <span data-bind='text: shadowB'></span>px&nbsp;
          <span data-bind='text: shadowC'></span>);
        </div>
    <h3>}</h3>
    <br/>
    <h3>.triangle:before {</h3>
      <div class="declarations">
        <label>border-width: </label><span data-bind='text: bordWidth'></span>;<br/>
        <label>boder-color: </label><span data-bind='text: bordColor'></span>;<br/>
        <label>margin: </label><span data-bind='text: bordOffSet'></span><br/>        
      </div>
    <h3>}</h3>
  </section>
  
</body>
<script type="text/javascript">
$(function(){
  $('li.box:first-child').addClass('active');
  $('li').click(function(){
    $('li').removeClass('active');
    $(this).addClass('active');
  });
});


var viewModel = function() {
  this.optionValues = ["c___","_c__","__c_","___c","cc__","_cc_","__cc","c__c"];
  this.triColor = ko.observable("yellow");
  this.radioOption = ko.observable("c___");
  this.triangleColor = ko.computed(function() {
    return triangleColor = this.radioOption().replace(/c/gi, this.triColor() + " " ).replace(/_/g, 'transparent ' )
  }, this);

  this.triHeight = ko.observable("100");
  this.triWidth = ko.observable("100");
  this.triangleWidth = ko.computed(function() {
    if(this.radioOption() == "___c" || this.radioOption() == "_c__") {
      return this.triHeight() / 2 + "px " + this.triWidth() + "px";
    } else if(this.radioOption() == "c___" || this.radioOption() == "__c_") {
      return this.triHeight() + "px " + this.triWidth() / 2 + "px";
    } else {
      return this.triHeight() / 2 + "px " + this.triWidth() / 2 + "px";
    }
  }, this);  
  
  this.shadowX = ko.observable("4");
  this.shadowY = ko.observable("4");
  this.shadowB = ko.observable("4");
  this.shadowC = ko.observable("#AAAAAA");
  this.shadowCode = ko.computed(function() {
    return 'drop-shadow(' + this.shadowX() + 'px ' + this.shadowY() + 'px ' + this.shadowB() + 'px ' + this.shadowC() + ')';
  }, this);

  this.borderX = ko.observable("0");
  this.borderY = ko.observable("0");
  this.bordOffSet = ko.computed(function() {
    return this.borderY() + 'px ' + this.borderX() + 'px'
  }, this);
  
  this.borderS = ko.observable("2");
  this.bordWidth = ko.computed(function() {
    if(this.radioOption() == "___c" || this.radioOption() == "_c__") {
      return (+this.triHeight() / 2 + +this.borderS()) + "px " + (+this.triWidth() + +this.borderS()) + "px";
    } else if(this.radioOption() == "c___" || this.radioOption() == "__c_") {
      return (+this.triHeight() + +this.borderS()) + "px " + (+this.triWidth() / 2 + +this.borderS()) + "px";
    } else {
      return (+this.triHeight() / 2 + +this.borderS()) + "px " + (+this.triWidth() / 2 + +this.borderS()) + "px";
    }
  }, this);  

  this.borderC = ko.observable("rgba(0,255,0,0.5)");
  this.bordColor = ko.computed(function() {
    return bordColor = this.radioOption().replace(/c/gi, this.borderC() + " " ).replace(/_/g, 'transparent ' )
  }, this);
};
ko.applyBindings(new viewModel());

</script>
</html>
