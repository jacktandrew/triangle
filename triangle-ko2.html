<head>
<style>
section {float: left;}
ul {margin: 3px; padding: 3px;}
h4 {margin: 3px; padding: 3px;}
.type {margin: 20px 0 0;}
.sub {width: 200px;}
.color, .shadow_color, .border_color {width: 100px;}
input {width: 30px; background: white;}
li {display: inline-block; border: 1px dashed gray; padding: 5px;}
li.active, li:hover {border: 1px solid black;}

#tri_code, #bor_code {margin-left: 300px;}
#tri_code strong, #bor_code strong {margin-left: -15px;}

.triangle {
  position: relative;
  border-style: solid;
  border-width: 20px;
  border-color: transparent;
  height:0; width:0;
  line-height: 0;
  font-size: 0;
}

#visual {position: absolute; top: 50px; left: 350px;}

.group:before, .group:after {content:""; display:table;}
.group:after {clear:both;}

.left {border-left-color: gray; margin: 0 -10px 0 10px;}
.right {border-right-color: gray; margin: 0 10px 0 -10px;}
.top {border-top-color: gray; margin: 10px 0 -10px 0;}
.bottom {border-bottom-color: gray; margin: -10px 0 10px 0;}
.half {border-width: 16px; margin: 5px;}

</style>
<!-- <script src="http://code.jquery.com/jquery-latest.min.js"></script> -->
<script src="jquery.min.js"></script>
<script src="knockout-2.1.0.js"></script>
<script>
$(function(){
  $('li').click(function(){
    $('li').removeClass('active');
    $(this).addClass('active');
  });
});


// This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
function AppViewModel() {
    this.triWidth = ko.observable("200");
    this.triHeight = ko.observable("200");
    this.triColor = ko.observable("White");
    this.triType = $('li.active').children().attr('class')
    this.shadowX = ko.observable("2");
    this.shadowY = ko.observable("2");
    this.shadowBlur = ko.observable("2");
    this.shadowColor = ko.observable("gray");
    this.borderSize = ko.observable("2");
    this.borderColor = ko.observable("red");
}

// Activates knockout.js
ko.applyBindings(new AppViewModel());
    
    var borderWidth = +borderSize * 2 + +triWidth
    var borderHeight = +borderSize * 2 + +triHeight
    
    var borderTop = Math.floor(-borderSize)
    var borderLeft = Math.floor(-borderSize)
    
    if( $this.hasClass('top') ){
      triWidth = triWidth / 2
      borderWidth = +borderSize + +triWidth
      borderTop = Math.floor(-borderSize * 2/3)
    }
    
    if( $this.hasClass('bottom') ){
      triWidth = triWidth / 2
      borderWidth = +borderSize + +triWidth
      borderTop = Math.ceil(-borderSize * 10/3)
    }
    
    if( $this.hasClass('left') ){
      triHeight = triHeight / 2
      borderHeight = +borderSize + +triHeight
      borderLeft = Math.floor(-borderSize * 2/3)
    }
    
    if( $this.hasClass('right') ){
      triHeight = triHeight / 2
      borderHeight = +borderSize + +triHeight
      borderLeft = Math.ceil(-borderSize * 10/3)
    }

    if( $this.hasClass('top left') ){
      borderWidth += 1; borderHeight += 1;
    }

    if( $this.hasClass('top right') ){
      borderWidth += 1; borderHeight += 1;
      borderLeft = Math.ceil(-borderSize * 1.5 - 1.5)
    }
    
    if( $this.hasClass('bottom left') ){
      borderWidth += 1; borderHeight += 1;
      borderTop = Math.floor(-borderSize * 1.5) - 1
    }
    
    if( $this.hasClass('bottom right') ){
      borderWidth += 1; borderHeight += 1;
      borderTop = Math.floor(-borderSize * 1.5) - 1 
      borderLeft = Math.floor(-borderSize * 1.5) - 1
    }
    
    var widthCode = triHeight + 'px ' + triWidth + 'px';
    var borderWidthCode = borderHeight + 'px ' + borderWidth + 'px';
    
    var topCode = borderTop - triHeight
    var leftCode = borderLeft - triWidth
    
    var triColorCSS = $this.data('color').replace(/c/g, c).replace(/_/g, 'transparent');
    var borderColorCSS = $this.data('color').replace(/c/g, bor_c).replace(/_/g, 'transparent');
    
    $('#tri_code').html(
      '<strong>.triangle {</strong><br/>' +
      'height: 0;<br/>' +
      'width: 0;<br/>' +
      'position: relative;<br/>' +
      'border-style: ' + style + ';<br/>' +
      'border-width: ' + width + ';<br/>' +
      'border-color: ' + color + ';<br/>' +
      '<span><strong>}</strong></span><br/>'
    );

    if(borderSize !== "") {
      $('#bor_code').html(
        '<br/><strong>.triangle:before {</strong><br/>' +
        'content: "";<br/>' +
        'position: absolute;<br/>' +
        'z-index: -1;<br/>' +
        'top: ' + code_top + 'px;<br/>' +
        'left: ' + code_left + 'px;<br/>' +
        'height: 0;<br/>' +
        'width: 0;<br/>' +
        'border-style: ' + style + ';<br/>' +
        'border-width: ' + border_width + ';<br/>' +
        'border-color: ' + border_color + ';<br/>' +
        '<span><strong>}</strong></span><br/>'
      );
    }

    var shadow_code = ' -webkit-filter: drop-shadow(' + shadowX + 'px ' + shadowY + 'px ' + shadowBlur + 'px ' + shadowColor+ ');<br/>' +
                      ' -moz-filter: drop-shadow(' + shadowX + 'px ' + shadowY + 'px ' + shadowBlur + 'px ' + shadowColor+ ');<br/>' +
                      ' -o-filter: drop-shadow(' + shadowX + 'px ' + shadowY + 'px ' + shadowBlur + 'px ' + shadowColor+ ');<br/>' +
                      ' -filter: drop-shadow(' + shadowX + 'px ' + shadowY + 'px ' + shadowBlur + 'px ' + shadowColor+ ');<br/>'
                  
    var shadow_css =  {'-webkit-filter': 'drop-shadow(' + shadowX + 'px ' + shadowY + 'px ' + shadowBlur + 'px ' + shadowColor+ ')',
                       '-moz-filter': 'drop-shadow(' + shadowX + 'px ' + shadowY + 'px ' + shadowBlur + 'px ' + shadowColor+ ')',
                       '-o-filter': 'drop-shadow(' + shadowX + 'px ' + shadowY + 'px ' + shadowBlur + 'px ' + shadowColor+ ')',
                       '-filter': 'drop-shadow(' + shadowX + 'px ' + shadowY + 'px ' + shadowBlur + 'px ' + shadowColor+ ')'}
    
    if(shadowX !== "" && shadowY !== "" && shadowBlur !== "" && shadowColor!== ""){
      if(borderSize === "" ){
        $('#tri_code span').prepend(shadow_code);
        $('#result').css(shadow_css);
      } else {
        $('#bor_code span').prepend(shadow_code);
        $('#border').css(shadow_css);
      }
    }

    $('#border').css({
      'border-style': style, 
      'border-width': border_width, 
      'border-color': border_color, 
      'z-index': -1,
      position: 'absolute',
      height: 0,
      width: 0,
      top: borderTop,
      left: borderLeft,
    });
    
    $('#result').css({
      'border-style': style, 
      'border-width': width, 
      'border-color': color, 
      'z-index': 2,
      height: 0, 
      width: 0,
    });
  });
});




</script>
</head>
<body>
<section class="group">

  <h4>Triangle</h4>
  <label>Width</label>    <input data-bind="value: triWidth" />
  <label>Height</label>   <input data-bind="value: triHeight" />
  <label>Color</label>    <input data-bind="value: triColor" />

  <div class="group">
    <ul>
      <li class="active"><div class="triangle left" data-color="_ _ _ c"></div></li> <!-- height / 2 -->
      <li><div class="triangle top" data-color="c _ _ _"></div></li>                 <!-- width / 2 -->
      <li><div class="triangle bottom" data-color="_ _ c _"></div></li>              <!-- width / 2 -->
      <li><div class="triangle right" data-color="_ c _ _"></div></li>               <!-- height / 2 -->
      <br/  >
      <li><div class="triangle half top left" data-color="c _ _ c"></div></li>       <!-- both / 2 -->
      <li><div class="triangle half bottom left" data-color="_ _ c c"></div></li>    <!-- both / 2 -->
      <li><div class="triangle half bottom right" data-color="_ c c _"></div></li>   <!-- both / 2 -->
      <li><div class="triangle half top right" data-color="c c _ _"></div></li>      <!-- both / 2 -->
    </ul>
  </div>

  <div class="group">
    <h4>Shadow</h4>
    <label>X</label>        <input data-bind="value: shadowX" />
    <label>Y</label>        <input data-bind="value: shadowY" />
    <label>Blur</label>     <input data-bind="value: shadowBlur" />
    <label>Color</label>    <input data-bind="value: shadowColor" />

    <h4>Border</h4>
    <label>Width</label>    <input data-bind="value: borderSize" />
    <label>Color</label>    <input data-bind="value: borderColor" />
  </div>
</section>

<section>
  <div id="visual">
    <div id="border" class="triangle"></div>
    <div id="result" class="triangle"></div>
  </div>
</section>
<section> 
  <div id="tri_code">
    <p><strong>.triangle {</strong></p>
    <p>height: 0;</p>
    <p>width: 0;</p>
    <p>position: relative;</p>
    <p>border-style: solid;</p>
    <p>border-width: <span data-bind="text: cssTriWidth"></span></p>
    <p>border-color: <span data-bind="text: cssTriColor"></span></p>
  </div>
  
  <div id="shadow_code">
  </div>
  
  <div id="border_code">
  </div>
</body>






















